<!DOCTYPE html>
<html lang="de">
<head>
        <title>NOTIZEN</title>
        <meta name="author" content="&Eacute;mile Jeremias Ruff"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="icon" type="image/png" href="../favicon.ico">

        <link rel="stylesheet" href="../stylesheet.css" type="text/css">
        <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">

        <meta charset="UTF-8">
        <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="0">

        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
        <script src="../script.js"></script>
         
</head>
<body>
  <div class="bg-1"></div>

  <header class="header-mobil">
    <div class="bg-2-section-reg">
          <div class="bg-2-reg" id="bg2-mobil-reg">

          <div class="main-nav">          
              <p class="toggleTrigger" data-default-open="false" data-display="block">
              <img src="../b/menu.png" alt="menu">Men&#252;</p>
              <ul class="toggleContent">
                  <li><a href="../index.html">Homepage</a></li>
                  <li><a href="programm.html">Programm</a></li>
                  <li><a href="teilnahme.html">Teilnahme</a></li>
                  <li><a href="verein.html">Verein</a></li>
              </ul>
          </div>
        
    </div>
   </header>


  <header class="header-desktop">
    <div class="bg-2-section-reg">
          <div class="bg-2" id="bg2-desktop">

          <div class="main-nav">         
              <p class="toggleTrigger" data-default-open="true" data-display="flex">
              <img src="../b/menu.png" alt="menu">Men&#252;:</p>
              <ul class="toggleContent">
                  <li><a href="../index.html" style="text-decoration: none;">Homepage</a></li>
                  <li><img class="krone" src="../b/krone.png" alt="Krone"><a href="programm.html">Programm</a></li>
                  <li><a href="teilnahme.html">Teilnahme</a></li>
                  <li><a href="verein.html">Verein</a></li>
              </ul>
          </div>
        
          <div class="bg-2-grundinfo">          
                <table><tr><td><img src="../b/karte.png" alt="Karte"></td>
                           <td>Dresden Neustadt</td>
                           <td><img src="../b/logo-insta.png" alt="Logo Instagram"></td>
                           <td>&nbsp; louisenfest_dresden</td></tr>

                       <tr><td><img src="../b/kalender.png" alt="Kalender"></td>
                           <td>20. bis 21. Juni 2025</td>
                           <td><img src="../b/logo-outlook.png" alt="Logo Outlook"></td>
                           <td>&nbsp; louisenfest@outlook.de</td></tr>      
              </table>
        </div>
    </div>
  </header>

  <main>
    <div class="content-below" id="reg">
    
      <h1 style="margin-top: 10px">Programm</h1>
      <p class="link-before">Joa hier steht dann halt noch was zum Programm, so nen' kleiner Einführungstext eben sowie: <br>
         Welche Bühne ist welche? <a href="#buehnen"><u>Hier</u></a> sind alle stages kartegraphiert.</p>

      <section id="hauptbuehne-section">
          <h2 class="toggleTrigger" data-default-open="true">Hauptbühne</h2>
          <div class="toggleContent" id="hauptbuehne"></div>
      </section>

      <section id="nebenbuehne-section">
          <h2 class="toggleTrigger" data-default-open="false">Nebenbühne</h2>
          <div class="toggleContent" id="nebenbuehne"></div>
      </section>

      <section id="a-park-section">
          <h2 class="toggleTrigger" data-default-open="true">Bühne A-Park</h2>
          <div class="toggleContent" id="a-park"></div>
      </section>


      <p id="buehnen">Bühnen</p>
      <iframe class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" 
      src="https://umap.openstreetmap.de/de/map/louisenfest-dresden_90885?scaleControl=false&
      miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&
      searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&
      onLoadPanel=none&captionBar=false&captionMenus=true"></iframe><p>
      <a href="https://umap.openstreetmap.de/de/map/louisenfest-dresden_90885?scaleControl=false&
      miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&
      searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&
      onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p>

  </div>
  </main>


  <div class="horizontale-linie"></div>
  <footer>
          <ul><li><a href="kontakt.html">Kontakt</a></li>
              <li>|</li>
              <li><a href="impressum.html">Impressum</a></li>
          </ul>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBnEnZrko6pqy5Q5ZAYlo3iW30hc1F_oV8",
      authDomain: "programm-louisenfest.firebaseapp.com",
      projectId: "programm-louisenfest",
      storageBucket: "programm-louisenfest.firebasestorage.app",
      messagingSenderId: "385737458779",
      appId: "1:385737458779:web:f80e7317d6eb94f446ab7e"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function formatTime(ts) {
      const date = ts.toDate();
      return date.toLocaleTimeString('de-DE', {
        hour: '2-digit',
        minute: '2-digit',
      });
    }

    async function showLineup() {
      const snapshot = await getDocs(collection(db, "acts"));
      const acts = [];

      snapshot.forEach(doc => {
        const data = doc.data();
        acts.push({
          band: data.band,
          stage: data.stage,
          start: data.start,
          end: data.end,
        });
      });

      const stageContainers = {
        "Hauptbühne": document.getElementById("hauptbuehne"),
        "Nebenbühne": document.getElementById("nebenbuehne"),
        "A-Park": document.getElementById("a-park"),        
      };

      const grouped = {
        "Hauptbühne": [],
        "Nebenbühne": [],
        "A-Park": []
      };

      acts.forEach(act => {
        if (grouped[act.stage]) {
          grouped[act.stage].push(act);
        }
      });

      for (const stage in grouped) {
        grouped[stage].sort((a, b) => a.start.seconds - b.start.seconds);

        grouped[stage].forEach(act => {
          const actDiv = document.createElement("div");
          actDiv.className = "act";

          const timeDiv = document.createElement("div");
          timeDiv.className = "time";
          timeDiv.textContent = `${formatTime(act.start)} - ${formatTime(act.end)}`;

          const bandDiv = document.createElement("div");
          bandDiv.className = "band";
          bandDiv.textContent = act.band;

          actDiv.appendChild(timeDiv);
          actDiv.appendChild(bandDiv);
          stageContainers[stage].appendChild(actDiv);
        });
      }
    }

    showLineup();
  </script>

</body>
</html>

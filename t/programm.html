<!DOCTYPE html>
<html lang="de">
<head>
    <title>Louisenfest DD | Programm</title>
    <meta name="author" content="Émile Jeremias Ruff"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="icon" type="image/png" href="../favicon.ico">
    <link rel="stylesheet" href="../stylesheet.css?v=1506" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
    
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="../script.js"></script>
</head>
<body>
    <div class="bg-1"></div>

    <header class="header-mobil">
        <div class="bg-2-section-reg">
            <div class="bg-2-reg" id="bg2-mobil-reg">
                <div class="main-nav">          
                    <p class="toggleTrigger" data-default-open="false" data-display="block">
                    <img src="../b/menu.png" alt="menu">Menü</p>
                    <ul class="toggleContent">
                        <li><a href="../index.html">Homepage</a></li>
                        <li><a href="programm.html">Programm</a></li>
                        <li><a href="teilnahme.html">Teilnahme</a></li>
                        <li><a href="verein.html">Verein</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <header class="header-desktop">
        <div class="bg-2-section-reg">
            <div class="bg-2" id="bg2-desktop">
                <div class="main-nav">         
                    <p><img src="../b/menu.png" alt="menu">Menü:</p>
                    <ul>
                        <li><a href="../index.html" style="text-decoration: none;">Homepage</a></li>
                        <li><img class="krone" src="../b/krone.png" alt="Krone"><a href="programm.html">Programm</a></li>
                        <li><a href="teilnahme.html">Teilnahme</a></li>
                        <li><a href="verein.html">Verein</a></li>
                    </ul>
                </div>
                <div class="bg-2-grundinfo">          
                      <table><tr><td><img src="../b/karte.png" alt="Karte"></td>
                                 <td>Dresden Neustadt</td>
                                 <td><img src="../b/logo-insta.png" alt="Logo Instagram"></td>
                                 <td>&nbsp;<a href="https://www.instagram.com/louisenfest_dresden" title="Instagram (Externer Link)">louisenfest_dresden</a></td></tr>

                             <tr><td><img src="../b/kalender.png" alt="Kalender"></td>
                                 <td>20. bis 21. Juni 2025</td>
                                 <td><img src="../b/logo-outlook.png" alt="Logo Outlook"></td>
                                 <td>&nbsp;<a href="mailto:louisenfest@outlook.de" title="Mail Dienst (Externer Link)">louisenfest@outlook.de</a></td></tr>     
                      </table>
                </div>
            </div>
        </div>
    </header>

    <main class="programm">
        <div class="content-below" id="reg">
            <h1 style="margin-top: 10px">Programm</h1>
            <p class="link-before">Wer spielt wo, wann und was? Hier könnt ihr unser genaues Programm nachlesen.<br>
            Welche Bühne ist welche? <a href="#maps"><u>Hier</u></a> sind alle stages und das außermusikalische Programm kartegraphiert.</p>

           <!-- <section id="a-park-section">
                <h2 class="toggleTrigger" data-default-open="true" data-display="block">Bühne A-Park
                <img class="toggle-png" src="../b/toggle-down.png" alt="Bild"></h2>
                <div class="toggleContent" id="a-park"></div>
            </section> -->

            <section id="mondpalast-section">
                <h2 class="toggleTrigger" data-default-open="false" data-display="block">Mondpalast-Bühne 
                <img class="toggle-png" src="../b/toggle-up.png" alt="Bild"></h2>
                <div class="toggleContent" id="mondpalast"></div>
            </section>

            <section id="grubers-section">
                <h2 class="toggleTrigger" data-default-open="false" data-display="block">Grubers-Bühne 
                <img class="toggle-png" src="../b/toggle-up.png" alt="Bild"></h2>
                <div class="toggleContent" id="grubers"></div>
            </section>

            <section id="little-creatures-section">
                <h2 class="toggleTrigger" data-default-open="false" data-display="block">Lobo-Bühne
                <img class="toggle-png" src="../b/toggle-up.png" alt="Bild"></h2>
                <div class="toggleContent" id="creatures"></div>
            </section>
            
            <section id="roh-section">
                <h2 class="toggleTrigger" data-default-open="false" data-display="block">Roh-Bühne
                <img class="toggle-png" src="../b/toggle-up.png" alt="Bild"></h2>
                <div class="toggleContent" id="roh"></div>
            </section>


            <p style="margin-top: 130px; font-size: 20px;" id="maps">Zur Verfügung stehende Kategorien:</p>

            <div class="maps">
              <div><div class="toggleTrigger" data-target="#buehnen" data-default-open="true"><img src="../b/buenen.png" alt="Bühnen">Bühnen</div></div>
              <div><div class="toggleTrigger" data-target="#kultur" data-default-open="false"><img src="../b/kultur.png" alt="Kultur">Kultur</div></div>
              <div><div class="toggleTrigger" data-target="#jammjamm" data-default-open="false"><img src="../b/jammjamm.png" alt="JammJamm">JammJamm</div></div>
              <div><div class="toggleTrigger" data-target="#cocktail" data-default-open="false"><img src="../b/cocktail.png" alt="Cocktail">Cocktails</div></div>
              <div><div class="toggleTrigger" data-target="#bier" data-default-open="false"><img src="../b/bier.png" alt="Bier">Bier</div></div>
              <div><div class="toggleTrigger" data-target="#sanitaer" data-default-open="false"><img src="../b/sanitaer.png" alt="Sanitär">Sanitär</div></div>
            </div>


            <div id="buehnen">
                <img src="../b/buenen.png" alt="Bühnen"><p id="buehnen">Bühnen</p>
                <iframe style="border: 2.5px solid red;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/louisenfest-dresden-2025_92999?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/louisenfest-dresden-2025_92999?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true&datalayers=41ad50bd-c459-4f3b-aad0-503903fc4fd5&fullscreenControl=null&editinosmControl=false#17/51.06698/13.75604">Vollbildanzeige</a></p></div>

            <div id="kultur">
                <img src="../b/kultur.png" alt="Kultur"><p>Kultur</p>
                <iframe style="border: 2.5px solid orange;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/kultur-louisenfest-dresden-2025-louisenfes_97537?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/kultur-louisenfest-dresden-2025-louisenfestco_97537?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p></div>

            <div id="cocktail">
                <img src="../b/cocktail.png" alt="Cocktail"><p>Cocktailstände</p>
                <iframe style="border: 2.5px solid green;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/cocktail-louisenfest-dresden-2025-louisenfestcom_97536?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/cocktailstande-louisenfest-dresden-2025-louisenfestco_97536?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p></div>

            <div id="bier">
                <img src="../b/bier.png" alt="Bier"><p>Bierstände</p>
                <iframe style="border: 2.5px solid blue;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/bierstande-louisenfest-dresden-2025-louisenfestcom_96863?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/bierstande-louisenfest-dresden-2025-louisenfestco_96863?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p></div>

            <div id="jammjamm">
                <img src="../b/jammjamm.png" alt="JammJamm"><p>JammJamm</p>
                <iframe style="border: 2.5px solid yellow;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/jammjamm-louisenfest-dresden-2025-louisenfestco_96862?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/essenstande-louisenfest-dresden-2025-louisenfestco_96862?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p></div>

            <div id="sanitaer">
                <img src="../b/sanitaer.png" alt="Sanitär"><p>Sanitär</p>
                <iframe style="border: 2.5px solid purple;" class="map" width="100%" frameborder="0" allowfullscreen allow="geolocation" src="https://umap.openstreetmap.de/de/map/sanitar-louisenfest-dresden-2025-louisenfestcom_96864?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true#18/51.06585/13.75621"></iframe>
                <p><a href="https://umap.openstreetmap.de/de/map/gewerbe-louisenfest-dresden-2025-louisenfestcom_96864?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">Vollbildanzeige</a></p></div>

        </div>
    </main>

<!-- Footer -->
    <form action="https://buttondown.com/api/emails/embed-subscribe/LouOrga"
          method="post"
          class="sub-form">
      <p>Bleibe immer auf dem neuesten Stand mit unserem kostenlosem Newsletter:</p>   
      <label for="email">E-Mail-Adresse:</label>
      <input type="email" name="email" placeholder="you@example.com" />
      <input type="hidden" value="1" name="embed" />
      <input type="submit" value="Abonnieren" />
    </form>

    <div class="horizontale-linie"></div>
    <footer class="footer-m">
            <ul><li><a href="kontakt.html">Kontakt</a></li>
                <li>|</li>
                <li><a href="impressum.html">Impressum</a></li>
            </ul>
            <p><a href="dati.html">AGB&nbsp; & &nbsp;Datenschutz</a></p>        
    </footer>

    <footer class="footer-dp">
            <ul><li><a href="kontakt.html">Kontakt</a></li>
                <li>|</li>
                <li><a href="dati.html">AGB&nbsp; & &nbsp;Datenschutz</a></li>
                <li>|</li>
                <li><a href="impressum.html">Impressum</a></li>
            </ul>
    </footer>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBnEnZrko6pqy5Q5ZAYlo3iW30hc1F_oV8",
        authDomain: "programm-louisenfest.firebaseapp.com",
        projectId: "programm-louisenfest",
        storageBucket: "programm-louisenfest.firebasestorage.app",
        messagingSenderId: "385737458779",
        appId: "1:385737458779:web:f80e7317d6eb94f446ab7e"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function formatTime(ts) {
        const date = typeof ts.toDate === 'function' ? ts.toDate() : new Date(ts);
        return date.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
    }

    function formatDate(ts) {
        const date = typeof ts.toDate === 'function' ? ts.toDate() : new Date(ts);
        return date.toLocaleDateString('de-DE', {
            weekday: 'long',
            day: '2-digit',
            month: 'long',
            year: 'numeric'
        });
    }

    async function loadStage(stageId, collectionName) {
        const snapshot = await getDocs(collection(db, collectionName));
        const container = document.getElementById(stageId);
        const actsByDay = {};

        snapshot.forEach(doc => {
            const data = doc.data();
            const dateKey = formatDate(data.start);
            if (!actsByDay[dateKey]) actsByDay[dateKey] = [];
            actsByDay[dateKey].push({
                band: data.band,
                start: data.start,
                end: data.end,
                link: data.link || "#",
                info: data.info || " - "
            });
        });

        const dayContainer = document.createElement("div");
        dayContainer.className = "day-container";

        Object.keys(actsByDay).sort().forEach(dateKey => {
            const dayBlock = document.createElement("div");
            dayBlock.className = "day-block";

            const dayHeader = document.createElement("h3");
            dayHeader.textContent = dateKey;
            dayBlock.appendChild(dayHeader);

            const acts = actsByDay[dateKey];
            acts.sort((a, b) => {
                const aStart = typeof a.start.toDate === 'function' ? a.start.toDate() : new Date(a.start);
                const bStart = typeof b.start.toDate === 'function' ? b.start.toDate() : new Date(b.start);
                return aStart - bStart;
            });

            acts.forEach(act => {
                const actDiv = document.createElement("div");
                actDiv.className = "act";

                const timeDiv = document.createElement("div");
                timeDiv.className = "time";
                timeDiv.textContent = `${formatTime(act.start)}`;

                const bandDiv = document.createElement("div");
                bandDiv.className = "band";

                const bandLink = document.createElement("a");
                
                if (act.info && act.info.trim().toLowerCase().endsWith("popup")) {
                    bandLink.href = "#";
                    bandLink.textContent = act.band;
                    bandLink.style.cursor = "pointer";
                    bandLink.title = `Popup mit Bandnamen öffnen (interner Link)`;

                    bandLink.addEventListener("click", e => {
                        e.preventDefault();
                        const popupName = "popup_" + Date.now();
                        const popup = window.open(
                            act.link,
                            popupName,
                            "width=400,height=300,scrollbars=yes,resizable=yes"
                        );
                        if (!popup) alert(`Popup wurde blockiert. Popups für diese Seite erlauben oder öffnen unter louisenfest.com/t/${act.link}`);
                    });
                } else {
                    bandLink.href = act.link;
                    bandLink.textContent = act.band;
                    bandLink.target = "_blank";
                    bandLink.rel = "noopener noreferrer";
                    bandLink.title = `Genre: ${act.info}   |   Externer Link: Instagram`;

                        if (act.link.includes("instagram.com")) {
                            bandLink.title = `Genre: ${act.info}   |   Externer Link: Instagram`;
                        } else {
                            bandLink.title = `Genre: ${act.info}   |   Keinen Instagram-Account gefunden`;
                        }
                }

                bandDiv.appendChild(bandLink);
                actDiv.appendChild(timeDiv);
                actDiv.appendChild(bandDiv);
                dayBlock.appendChild(actDiv);
            });

            dayContainer.appendChild(dayBlock);
        });

        container.appendChild(dayContainer);
    }

    loadStage("a-park", "a-park");
    loadStage("mondpalast", "mondpalast");
    loadStage("grubers", "grubers");
    loadStage("creatures", "little-creatures");
    loadStage("el-cubanito", "el-cubanito");
    loadStage("roh", "roh");
</script>



</body>
</html>
